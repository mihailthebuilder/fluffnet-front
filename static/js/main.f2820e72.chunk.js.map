{"version":3,"sources":["components/Header/index.jsx","components/Upload/index.jsx","components/Response/index.jsx","components/Faq/index.jsx","resources/fire.js","components/Feedback/index.jsx","App.js","index.js"],"names":["Header","href","className","Upload","image","setImage","setMessage","setPrediction","useState","isLoading","setIsLoading","id","onSubmit","event","preventDefault","fd","FormData","append","raw","requestUrl","window","location","hostname","axios","post","then","res","status","Error","data","fluffy","prob","undefined","isFluffy","probShown","Math","round","conclusion","confidence","catch","error","console","message","onChange","preview","rawFile","target","files","type","includes","size","URL","createObjectURL","required","disabled","alt","src","Response","Faq","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","saveFeedback","fileObj","prediction","correct","storage","getStorage","fileName","name","extension","substring","lastIndexOf","length","result","characters","charactersLength","i","charAt","floor","random","randomName","storageRef","ref","uploadBytes","addDoc","collection","timestamp","Date","docRef","log","Feedback","rawImage","submitted","setSubmitted","sendFeedback","value","onClick","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f2820e72.chunk.js","sourcesContent":["import \"./index.scss\";\n\nconst Header = () => (\n  <header>\n    <nav>\n      <a href=\"#faq\">FAQ</a>\n    </nav>\n    <h1>\n      <span className=\"title-emoji\">☁️</span> FluffNet{\" \"}\n      <span className=\"title-emoji\">☁️</span>\n    </h1>\n  </header>\n);\n\nexport default Header;\n","import { useState } from \"react\";\nimport axios from \"axios\";\nimport \"./index.scss\";\n\nconst Upload = ({ image, setImage, setMessage, setPrediction }) => {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const uploadImage = (event) => {\n    setImage({ preview: \"\", raw: \"\" });\n    setPrediction({});\n\n    const rawFile = event.target.files[0];\n\n    if (rawFile === undefined) {\n      setMessage(\"please give me an image 🖼️\");\n      return;\n    }\n\n    if (!rawFile.type.includes(\"image\")) {\n      setMessage(\"please give me an image 🖼️\");\n      return;\n    }\n\n    if (rawFile.size / 1024 / 1024 >= 10) {\n      setMessage(\"upload an image of less than 10 MB\");\n      return;\n    }\n\n    setImage({\n      preview: URL.createObjectURL(rawFile),\n      raw: rawFile,\n    });\n    setMessage(\"quick, send it to me 📨\");\n  };\n\n  const predictImage = (event) => {\n    event.preventDefault();\n    setIsLoading(true);\n    setMessage(\"analysing the image, might take up to 2 minutes ⏳\");\n\n    let fd = new FormData();\n    fd.append(\"image\", image.raw);\n\n    const requestUrl =\n      window.location.hostname === \"localhost\"\n        ? \"http://localhost:5000/\"\n        : \"https://fluffnet-api.herokuapp.com\";\n\n    axios\n      .post(requestUrl, fd)\n      .then((res) => {\n        if (res.status !== 200) {\n          throw new Error(\"Response status !== 200\", { res });\n        }\n\n        const { fluffy, prob } = res.data;\n\n        if (fluffy === undefined || prob === undefined)\n          throw new Error(\"Undefined response\", { res });\n\n        const isFluffy = fluffy === \"True\";\n\n        let probShown = Math.round(prob * 100);\n        if (!isFluffy) probShown = 100 - probShown;\n\n        const conclusion = isFluffy ? \"it's fluffy 🧸\" : \"it's not fluffy 🔨\";\n        const confidence = ` (with ${probShown}% confidence)`;\n\n        setPrediction({ fluffy, prob });\n        setMessage(conclusion + confidence);\n        setIsLoading(false);\n      })\n      .catch((error) => {\n        setMessage(\"something went wrong 😵 try again please!\");\n        console.error(error.message);\n        console.error(error.res);\n      });\n  };\n\n  return (\n    <section id=\"hero\">\n      <div className=\"hero-left\">\n        <p>\n          Upload an image and our 🤖 will tell you if it has something fluffy in\n          it 🧸.\n        </p>\n        <form onSubmit={predictImage}>\n          <label>\n            <span className=\"button upload-button\">Upload image</span>\n            <input onChange={uploadImage} type=\"file\" required></input>\n          </label>\n\n          <button\n            className={\n              !image.preview || isLoading ? \"button\" : \"button submit-enabled\"\n            }\n            type=\"submit\"\n            disabled={!image.preview || isLoading}\n          >\n            {isLoading ? \"Loading...\" : \"Submit\"}\n          </button>\n        </form>\n      </div>\n      <div className=\"hero-right\">\n        {image.preview ? (\n          <img alt=\"\" src={image.preview} />\n        ) : (\n          <div className=\"image-placeholder\">Image will be shown here </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default Upload;\n","import \"./index.scss\";\n\nconst Response = ({ message }) => (\n  <section id=\"results\">\n    <h2>\n      🤖 says...\n      <span className=\"robot-message\">{message}</span>\n    </h2>\n  </section>\n);\n\nexport default Response;\n","import \"./index.scss\";\n\nconst Faq = () => (\n  <section id=\"faq\">\n    <h2>FAQ</h2>\n    <div className=\"question\">\n      <h3>How does this work?</h3>\n      <p>\n        Check out the source code{\" \"}\n        <a href=\"https://github.com/mihailthebuilder/fluffnet\">here</a>.\n      </p>\n    </div>\n    <div className=\"question\">\n      <h3>Do you store the images I upload?</h3>\n      <p>\n        Only if you click the <b>Correct</b>/<b>Incorrect</b> buttons. In that\n        case, we'll use your feedback to make the model more accurate.\n      </p>\n    </div>\n    <div className=\"question\">\n      <h3>\n        How can I let you know about an issue/error with the website/model?\n      </h3>\n      <p>\n        If you're a dev, you can raise a ticket on the{\" \"}\n        <a href=\"https://github.com/mihailthebuilder/fluffnet\">GitHub repo</a>.\n        If not, you can send me a message on{\" \"}\n        <a href=\"https://www.linkedin.com/in/mihailmarian/\">LinkedIn</a>.\n      </p>\n    </div>\n    <div className=\"question\">\n      <h3>Can I contact you about anything else?</h3>\n      <p>\n        Sure! I'm always open to talking to people about deep learning. Just\n        send me a message on{\" \"}\n        <a href=\"https://www.linkedin.com/in/mihailmarian/\">LinkedIn</a>.\n      </p>\n    </div>\n  </section>\n);\n\nexport default Faq;\n","// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, collection, addDoc } from \"firebase/firestore\";\n\nimport { getStorage, ref, uploadBytes } from \"firebase/storage\";\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDCqHep8arVct7xlRCZpOY5T8dU44FpygM\",\n  authDomain: \"fluffnet-ai.firebaseapp.com\",\n  projectId: \"fluffnet-ai\",\n  storageBucket: \"fluffnet-ai.appspot.com\",\n  messagingSenderId: \"443265600217\",\n  appId: \"1:443265600217:web:a0522ad0c63fcd5c8accc8\",\n};\n\n// Initialize Firebase\ninitializeApp(firebaseConfig);\nconst db = getFirestore();\n\n// generates new name for the image\nconst randomName = (length) => {\n  let result = \"\";\n  let characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n  let charactersLength = characters.length;\n  for (let i = 0; i < length; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n};\n\nconst saveFeedback = (fileObj, prediction, correct) => {\n  const storage = getStorage();\n\n  let fileName = fileObj.name;\n  const extension = fileName.substring(fileName.lastIndexOf(\".\"));\n  fileName = randomName(20) + extension;\n\n  const storageRef = ref(storage, fileName);\n  uploadBytes(storageRef, fileObj).then(() => {\n    addDoc(collection(db, \"feedback\"), {\n      fileName,\n      prediction,\n      correct,\n      timestamp: new Date(),\n    })\n      .then((docRef) => {\n        console.log(\"Document written with ID: \", docRef.id);\n      })\n      .catch((error) => {\n        console.error(\"Error adding document: \", error);\n      });\n  });\n};\n\nexport { saveFeedback };\n","import { useState } from \"react\";\nimport \"./index.scss\";\nimport { saveFeedback } from \"../../resources/fire\";\n\nconst Feedback = ({ prediction, rawImage }) => {\n  const [submitted, setSubmitted] = useState(false);\n\n  const sendFeedback = (event) => {\n    setSubmitted(true);\n    saveFeedback(rawImage, prediction, event.target.value === \"correct\");\n  };\n\n  return (\n    <section id=\"feedback\">\n      {submitted ? (\n        <p className=\"feedback-sent\">Thank you for the feedback 🙏</p>\n      ) : (\n        <>\n          <div className=\"buttons-container\">\n            <button\n              type=\"button\"\n              className=\"button left\"\n              onClick={sendFeedback}\n              value=\"correct\"\n            >\n              Correct\n            </button>\n            <button\n              className=\"button right\"\n              onClick={sendFeedback}\n              value=\"incorrect\"\n            >\n              Incorrect\n            </button>\n          </div>\n          <p className=\"note\">\n            We will store the photo and the 🤖's results if you answer this. See\n            the <a href=\"#faq\">FAQs</a> for more.\n          </p>\n        </>\n      )}\n    </section>\n  );\n};\n\nexport default Feedback;\n","import { useState } from \"react\";\nimport \"./App.scss\";\nimport Header from \"./components/Header\";\nimport Upload from \"./components/Upload\";\nimport Response from \"./components/Response\";\nimport Faq from \"./components/Faq\";\nimport Feedback from \"./components/Feedback\";\nimport \"./resources/fire\";\n\nfunction App() {\n  const [image, setImage] = useState({ preview: \"\", raw: \"\" });\n  const [message, setMessage] = useState(\"gimme an image puh-leeeaase 🥺\");\n  const [prediction, setPrediction] = useState({});\n\n  return (\n    <div className=\"App\">\n      <Header />\n\n      <Upload\n        image={image}\n        setImage={setImage}\n        setMessage={setMessage}\n        setPrediction={setPrediction}\n      />\n\n      <Response message={message} />\n\n      {prediction[\"prob\"] && image.raw && (\n        <Feedback prediction={prediction} rawImage={image.raw} />\n      )}\n\n      <Faq />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport App from \"./App\";\nimport \"./resources/fire\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}